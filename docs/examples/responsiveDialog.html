<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Spectrum CSS Dialogs Example</title>
    <meta name="viewport" content="user-scalable=no,initial-scale = 1.0,maximum-scale = 1.0">

    <link rel="stylesheet" href="../components/page/index-vars.css">
    <link rel="stylesheet" href="../components/icon/index-vars.css">
    <link rel="stylesheet" href="../components/button/index-vars.css">
    <link rel="stylesheet" href="../components/dialog/index-vars.css">
    <link rel="stylesheet" href="../components/underlay/index-vars.css">

    <script src="../icons/loadIcons.js"></script>
    <script src="js/vendor/focus-ring-polyfill.js"></script>
    <script src="js/vendor/typekit.js"></script>
    <script src="js/Switcher.js"></script>
    <script>
      loadIcons('../icons/spectrum-css-icons.svg');
      loadIcons('../icons/spectrum-icons.svg');

      var switcher = new Switcher({
        method: 'vars'
      });
      document.addEventListener('DOMContentLoaded', function() {

        switcher.theme = 'light';
        switcher.scale = 'medium';

        var themeKeys = {
          '1': 'lightest',
          '2': 'light',
          '3': 'dark',
          '4': 'darkest',
        };
        var scaleKeys = {
          'm': 'medium',
          'l': 'large'
        };
        document.addEventListener('keydown', function(event) {
          if (event.ctrlKey) {
            if (themeKeys[event.key]) {
              switcher.theme = themeKeys[event.key];
            }
            else if (scaleKeys[event.key]) {
              switcher.scale = scaleKeys[event.key];
            }
          }
        });

        document.getElementById('spectrum-underlay').addEventListener('click', closeCurrentDialog);
      });

      var currentDialog = null;

      function openDialog(dialog, withOverlay) {
        if (withOverlay !== false) {
          document.getElementById('spectrum-underlay').classList.add('is-open');
        }

        if (dialog.parentNode.classList.contains('spectrum-Dialog-wrapper')) {
          dialog.parentNode.classList.add('is-open');
        }

        dialog.classList.add('is-open');

        currentDialog = dialog;
      }

      function closeDialog(dialog) {
        document.getElementById('spectrum-underlay').classList.remove('is-open');
        dialog.classList.remove('is-open');

        if (dialog.parentNode.classList.contains('spectrum-Dialog-wrapper')) {
          dialog.parentNode.classList.remove('is-open');
        }

        if (dialog === currentDialog) {
          currentDialog = null;
        }
      }

      function closeCurrentDialog() {
        if (currentDialog) {
          closeDialog(currentDialog);
        }
      }

    </script>
  </head>
  <body class="spectrum spectrum--light spectrum--medium">

    <button class="spectrum-Button spectrum-Button--primary" onclick="openDialog(document.querySelector('#spectrumDialog'))" style="position: fixed; top: 50%; left: 50%; margin-left: -80px;">Open Small Dialog</button>

    <div class="spectrum-Dialog-wrapper is-open">
      <div class="spectrum-Dialog spectrum-Dialog--responsive spectrum-Dialog--medium is-open" id="spectrumDialog">
        <div class="spectrum-Dialog-header">
          <h2 class="spectrum-Dialog-title">Enable Smart Filters?</h2>
        </div>
        <div class="spectrum-Dialog-content">
          Smart filters are nondestructive and will preserve your original images.
        </div>
        <div class="spectrum-Dialog-footer">
          <button class="spectrum-Button spectrum-Button--secondary" onclick="closeDialog(this.closest('.spectrum-Dialog'))">Cancel</button>
          <button class="spectrum-Button spectrum-Button--cta" onclick="closeDialog(this.closest('.spectrum-Dialog'))">Enable</button>
        </div>
      </div>
    </div>

    <div class="spectrum-Underlay is-open" id="spectrum-underlay"></div>
  </body>
</html>